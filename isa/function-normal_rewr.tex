\isacomm{function}\ normal{\isacharunderscore}rewr\ {\isacharcolon}{\isacharcolon}\ {\isachardoublequoteopen}{\isacharparenleft}\isatv{a}{\isacharcomma}\ \isatv{b}{\isacharparenright}\ res{\isacharunderscore}term\ {\isasymRightarrow}\ {\isacharparenleft}\isatv{a}{\isacharcomma}\ \isatv{b}{\isacharparenright}\ res{\isacharunderscore}term{\isachardoublequoteclose}\isanewline
\ \ \isaOcomm{where}\ {\isachardoublequoteopen}\isafv{normal{\isacharunderscore}rewr}\ \isabv{x}\ {\isacharequal}\ {\isacharparenleft}\isanotation{if}\ normalised\ \isabv{x}\ \isanotation{then}\ \isabv{x}\ \isanotation{else}\ \isafv{normal{\isacharunderscore}rewr}\ {\isacharparenleft}step\ \isabv{x}{\isacharparenright}{\isacharparenright}{\isachardoublequoteclose}\isanewline
\ \ \isacomm{by}\ pat{\isacharunderscore}completeness\ auto
